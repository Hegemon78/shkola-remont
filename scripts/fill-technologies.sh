#!/bin/bash

# =============================================================================
# –°–∫—Ä–∏–ø—Ç –º–∞—Å—Å–æ–≤–æ–≥–æ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π —á–µ—Ä–µ–∑ Claude Code
# =============================================================================
#
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
#   ./fill-technologies.sh [–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ] [--parallel N] [--dry-run]
#
# –ü—Ä–∏–º–µ—Ä—ã:
#   ./fill-technologies.sh D02              # –ó–∞–ø–æ–ª–Ω–∏—Ç—å —ç–ª–µ–∫—Ç—Ä–∏–∫—É
#   ./fill-technologies.sh phase1           # –ó–∞–ø–æ–ª–Ω–∏—Ç—å –≤—Å—é —Ñ–∞–∑—É 1
#   ./fill-technologies.sh all --parallel 3 # –í—Å—ë –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ (3 –ø—Ä–æ—Ü–µ—Å—Å–∞)
#   ./fill-technologies.sh D02 --dry-run    # –ü–æ–∫–∞–∑–∞—Ç—å —á—Ç–æ –±—É–¥–µ—Ç –¥–µ–ª–∞—Ç—å
#
# =============================================================================

set -e

# –¶–≤–µ—Ç–∞ –¥–ª—è –≤—ã–≤–æ–¥–∞
RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
BLUE='\033[0;34m'
NC='\033[0m' # No Color

# –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –ø—Ä–æ–µ–∫—Ç–∞
PROJECT_DIR="/Users/nikolajeliseev/Desktop/–®–∫–æ–ª–∞ —Ä–µ–º–æ–Ω—Ç"
PROMPTS_DIR="$PROJECT_DIR/scripts/prompts"
PROGRESS_FILE="$PROJECT_DIR/scripts/progress.json"
LOG_DIR="$PROJECT_DIR/scripts/logs"

# –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
PARALLEL=1
DRY_RUN=false

# =============================================================================
# –§—É–Ω–∫—Ü–∏–∏
# =============================================================================

print_header() {
    echo -e "${BLUE}"
    echo "‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó"
    echo "‚ïë     –ú–ê–°–°–û–í–û–ï –ó–ê–ü–û–õ–ù–ï–ù–ò–ï –¢–ï–•–ù–û–õ–û–ì–ò–ô ‚Äî –®–∫–æ–ª–∞ –†–µ–º–æ–Ω—Ç–∞          ‚ïë"
    echo "‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù"
    echo -e "${NC}"
}

print_status() {
    echo -e "${GREEN}[‚úì]${NC} $1"
}

print_warning() {
    echo -e "${YELLOW}[!]${NC} $1"
}

print_error() {
    echo -e "${RED}[‚úó]${NC} $1"
}

print_info() {
    echo -e "${BLUE}[i]${NC} $1"
}

# –°–æ–∑–¥–∞—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –µ—Å–ª–∏ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç
setup_dirs() {
    mkdir -p "$PROMPTS_DIR"
    mkdir -p "$LOG_DIR"

    # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –µ—Å–ª–∏ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
    if [ ! -f "$PROGRESS_FILE" ]; then
        echo '{}' > "$PROGRESS_FILE"
    fi
}

# –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç—É—Å –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏–∑ progress.json
get_status() {
    local direction=$1
    if [ -f "$PROGRESS_FILE" ]; then
        python3 -c "
import json
with open('$PROGRESS_FILE') as f:
    data = json.load(f)
    print(data.get('$direction', {}).get('status', 'pending'))
" 2>/dev/null || echo "pending"
    else
        echo "pending"
    fi
}

# –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è
update_status() {
    local direction=$1
    local status=$2
    local count=$3

    python3 -c "
import json
from datetime import datetime

try:
    with open('$PROGRESS_FILE') as f:
        data = json.load(f)
except:
    data = {}

data['$direction'] = {
    'status': '$status',
    'technologies_created': $count,
    'updated': datetime.now().isoformat()
}

with open('$PROGRESS_FILE', 'w') as f:
    json.dump(data, f, indent=2, ensure_ascii=False)
"
}

# –ó–∞–ø—É—Å—Ç–∏—Ç—å Claude Code —Å –ø—Ä–æ–º—Ç–æ–º
run_claude() {
    local direction=$1
    local prompt_file="$PROMPTS_DIR/$direction.md"
    local log_file="$LOG_DIR/${direction}_$(date +%Y%m%d_%H%M%S).log"

    if [ ! -f "$prompt_file" ]; then
        print_error "–§–∞–π–ª –ø—Ä–æ–º—Ç–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω: $prompt_file"
        return 1
    fi

    print_info "–ó–∞–ø—É—Å–∫ Claude Code –¥–ª—è $direction..."
    print_info "–õ–æ–≥: $log_file"

    if [ "$DRY_RUN" = true ]; then
        print_warning "[DRY RUN] –ö–æ–º–∞–Ω–¥–∞: claude --print \"$(head -5 $prompt_file)...\""
        return 0
    fi

    update_status "$direction" "in_progress" 0

    # –ó–∞–ø—É—Å–∫ Claude Code
    # –ò—Å–ø–æ–ª—å–∑—É–µ–º --print –¥–ª—è –Ω–µ–∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞
    cd "$PROJECT_DIR"

    if claude --print "$(cat $prompt_file)" 2>&1 | tee "$log_file"; then
        print_status "$direction –∑–∞–≤–µ—Ä—à—ë–Ω —É—Å–ø–µ—à–Ω–æ"
        update_status "$direction" "completed" 0
    else
        print_error "$direction –∑–∞–≤–µ—Ä—à–∏–ª—Å—è —Å –æ—à–∏–±–∫–æ–π"
        update_status "$direction" "failed" 0
        return 1
    fi
}

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ
run_parallel() {
    local directions=("$@")
    local pids=()

    print_info "–ó–∞–ø—É—Å–∫ ${#directions[@]} –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ (–º–∞–∫—Å $PARALLEL –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ)..."

    for direction in "${directions[@]}"; do
        # –ñ–¥—ë–º –µ—Å–ª–∏ –¥–æ—Å—Ç–∏–≥–Ω—É—Ç –ª–∏–º–∏—Ç –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
        while [ ${#pids[@]} -ge $PARALLEL ]; do
            for i in "${!pids[@]}"; do
                if ! kill -0 "${pids[$i]}" 2>/dev/null; then
                    unset 'pids[$i]'
                fi
            done
            pids=("${pids[@]}")
            sleep 1
        done

        # –ó–∞–ø—É—Å–∫–∞–µ–º –≤ —Ñ–æ–Ω–µ
        run_claude "$direction" &
        pids+=($!)
        print_info "–ó–∞–ø—É—â–µ–Ω $direction (PID: ${pids[-1]})"
    done

    # –ñ–¥—ë–º –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≤—Å–µ—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
    print_info "–û–∂–∏–¥–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≤—Å–µ—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤..."
    for pid in "${pids[@]}"; do
        wait "$pid" 2>/dev/null || true
    done

    print_status "–í—Å–µ –ø—Ä–æ—Ü–µ—Å—Å—ã –∑–∞–≤–µ—Ä—à–µ–Ω—ã"
}

# –ü–æ–∫–∞–∑–∞—Ç—å —Ç–µ–∫—É—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å
show_progress() {
    echo ""
    echo -e "${BLUE}‚ïê‚ïê‚ïê –ü–†–û–ì–†–ï–°–° –ó–ê–ü–û–õ–ù–ï–ù–ò–Ø ‚ïê‚ïê‚ïê${NC}"
    echo ""

    if [ ! -f "$PROGRESS_FILE" ]; then
        echo "–§–∞–π–ª –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω"
        return
    fi

    python3 -c "
import json

directions = {
    'D00': ('–ö—É–ª—å—Ç—É—Ä–∞ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞', 10),
    'D01': ('–î–µ–º–æ–Ω—Ç–∞–∂', 22),
    'D02': ('–≠–ª–µ–∫—Ç—Ä–∏–∫–∞', 15),
    'D03': ('–°–ª–∞–±–æ—Ç–æ—á–∫–∞', 11),
    'D04': ('–°–∞–Ω—Ç–µ—Ö–Ω–∏–∫–∞', 18),
    'D05': ('–ö–ª–∏–º–∞—Ç', 16),
    'D06': ('–ú–æ–Ω—Ç–∞–∂', 17),
    'D07': ('–ò–∑–æ–ª—è—Ü–∏—è', 14),
    'D08': ('–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å—Ç–µ–Ω', 13),
    'D09': ('–®—Ç—É–∫–∞—Ç—É—Ä–∫–∞', 17),
    'D10': ('–ü–æ–∫—Ä–∞—Å–∫–∞', 14),
    'D11': ('–û–±–æ–∏', 18),
    'D12': ('–ü–ª–∏—Ç–∫–∞', 8),
    'D13': ('–ü–æ–ª—ã —á–µ—Ä–Ω–æ–≤—ã–µ', 15),
    'D14': ('–ü–æ–ª—ã —á–∏—Å—Ç–æ–≤—ã–µ', 19),
    'D15': ('–û–∫–Ω–∞', 13),
    'D16': ('–î–≤–µ—Ä–∏ –º–µ–∂–∫–æ–º–Ω–∞—Ç–Ω—ã–µ', 19),
    'D17': ('–î–≤–µ—Ä–∏ –≤—Ö–æ–¥–Ω—ã–µ', 14),
    'D18': ('–§–∞—Å–∞–¥', 18),
}

try:
    with open('$PROGRESS_FILE') as f:
        progress = json.load(f)
except:
    progress = {}

total = 0
completed = 0

for d_id, (name, count) in directions.items():
    status = progress.get(d_id, {}).get('status', 'pending')

    if status == 'completed':
        icon = '‚úÖ'
        completed += count - 1  # -1 –ø–æ—Ç–æ–º—É —á—Ç–æ 1 —É–∂–µ –±—ã–ª–∞
    elif status == 'in_progress':
        icon = 'üîÑ'
    elif status == 'failed':
        icon = '‚ùå'
    else:
        icon = '‚¨ú'

    total += count - 1
    print(f'{icon} {d_id} {name:<25} ({count} —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π)')

print(f'')
print(f'–ü—Ä–æ–≥—Ä–µ—Å—Å: {completed}/{total} —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π ({completed*100//total if total > 0 else 0}%)')
"
}

# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤ –ø—Ä–æ–º—Ç–æ–≤
generate_prompts() {
    print_info "–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤ –ø—Ä–æ–º—Ç–æ–≤..."

    # D02 –≠–ª–µ–∫—Ç—Ä–∏–∫–∞
    cat > "$PROMPTS_DIR/D02.md" << 'PROMPT_EOF'
–ó–∞–ø–æ–ª–Ω–∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –≠–õ–ï–ö–¢–†–ò–ö–ê (D02) –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞ "–í–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è –®–∫–æ–ª–∞ –†–µ–º–æ–Ω—Ç–∞".

## –ü—Ä–æ—á–∏—Ç–∞–π —Å–Ω–∞—á–∞–ª–∞:
1. /CLAUDE.md
2. /—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏/—Ä–µ–µ—Å—Ç—Ä-—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π.md (—Å–µ–∫—Ü–∏—è "–≠–ª–µ–∫—Ç—Ä–∏–∫–∞ D02")
3. /—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏/—ç–ª–µ–∫—Ç—Ä–∏–∫–∞/T-EL-001-—à—Ç—Ä–æ–±–ª–µ–Ω–∏–µ-—à—Ç—Ä–æ–±–æ—Ä–µ–∑–æ–º.md ‚Äî –ø—Ä–∏–º–µ—Ä
4. /—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏/—à–∞–±–ª–æ–Ω-—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏.md
5. /–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è/—ç–ª–µ–∫—Ç—Ä–∏–∫–∞/D02-—ç–ª–µ–∫—Ç—Ä–∏–∫–∞.md

## –°–æ–∑–¥–∞–π —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ (14 —à—Ç—É–∫):

### –®—Ç—Ä–æ–±–ª–µ–Ω–∏–µ:
- T-EL-002 –®—Ç—Ä–æ–±–ª–µ–Ω–∏–µ –ø–µ—Ä—Ñ–æ—Ä–∞—Ç–æ—Ä–æ–º

### –†–∞–∑–º–µ—Ç–∫–∞:
- T-EL-003 –†–∞–∑–º–µ—Ç–∫–∞ —Ç—Ä–∞—Å—Å

### –ü—Ä–æ–∫–ª–∞–¥–∫–∞ –∫–∞–±–µ–ª—è:
- T-EL-010 –ü—Ä–æ–∫–ª–∞–¥–∫–∞ –≤ –≥–æ—Ñ—Ä–µ –ø–æ —Å—Ç–µ–Ω–∞–º
- T-EL-011 –ü—Ä–æ–∫–ª–∞–¥–∫–∞ –≤ –≥–æ—Ñ—Ä–µ –ø–æ –ø–æ—Ç–æ–ª–∫—É
- T-EL-012 –ü—Ä–æ–∫–ª–∞–¥–∫–∞ –≤ —Å—Ç—è–∂–∫–µ –ø–æ–ª–∞
- T-EL-013 –ü—Ä–æ–∫–ª–∞–¥–∫–∞ –≤ –≥–∏–ø—Å–æ–∫–∞—Ä—Ç–æ–Ω–µ

### –ü–æ–¥—Ä–æ–∑–µ—Ç–Ω–∏–∫–∏ –∏ –∫–æ—Ä–æ–±–∫–∏:
- T-EL-020 –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–æ–¥—Ä–æ–∑–µ—Ç–Ω–∏–∫–æ–≤ –≤ –±–µ—Ç–æ–Ω
- T-EL-021 –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–æ–¥—Ä–æ–∑–µ—Ç–Ω–∏–∫–æ–≤ –≤ –ì–ö–õ
- T-EL-022 –ú–æ–Ω—Ç–∞–∂ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–∏—Ç–µ–ª—å–Ω—ã—Ö –∫–æ—Ä–æ–±–æ–∫

### –©–∏—Ç:
- T-EL-030 –°–±–æ—Ä–∫–∞ —ç–ª–µ–∫—Ç—Ä–æ—â–∏—Ç–∞

### –ß–∏—Å—Ç–æ–≤–∞—è (–º–µ—Ö–∞–Ω–∏–∑–º—ã):
- T-EL-040 –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ä–æ–∑–µ—Ç–æ–∫
- T-EL-041 –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—ã–∫–ª—é—á–∞—Ç–µ–ª–µ–π
- T-EL-050 –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –≤–∞—Ä–æ—á–Ω–æ–π –ø–∞–Ω–µ–ª–∏
- T-EL-060 –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ç–æ—á–µ—á–Ω—ã—Ö —Å–≤–µ—Ç–∏–ª—å–Ω–∏–∫–æ–≤

## –°–≤—è–∑–∏ –º–µ–∂–¥—É —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è–º–∏:
- T-EL-001/002 (—à—Ç—Ä–æ–±–ª–µ–Ω–∏–µ) ‚Üí T-EL-010..013 (–ø—Ä–æ–∫–ª–∞–¥–∫–∞)
- T-EL-010..013 (–ø—Ä–æ–∫–ª–∞–¥–∫–∞) ‚Üí T-EL-020..022 (–ø–æ–¥—Ä–æ–∑–µ—Ç–Ω–∏–∫–∏)
- T-EL-030 (—â–∏—Ç) ‚Äî —Ñ–∏–Ω–∞–ª —á–µ—Ä–Ω–æ–≤–æ–π
- T-EL-040..060 ‚Äî —á–∏—Å—Ç–æ–≤–∞—è (–ü–û–°–õ–ï –æ—Ç–¥–µ–ª–∫–∏ —Å—Ç–µ–Ω!)

## –ü—Ä–∞–≤–∏–ª–∞:
- –ö–∞–∂–¥–∞—è —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è ‚Äî –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ñ–∞–π–ª –≤ /—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏/—ç–ª–µ–∫—Ç—Ä–∏–∫–∞/
- –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–æ —à–∞–±–ª–æ–Ω—É (YAML frontmatter, –≤—Å–µ —Ä–∞–∑–¥–µ–ª—ã)
- –†–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (—Ä–∞—Å—Ö–æ–¥, –≤—Ä–µ–º—è, –¥–æ–ø—É—Å–∫–∏)
- 5 —Ç–µ—Å—Ç–æ–≤—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤ –≤ –∫–æ–Ω—Ü–µ

## –ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è:
–û–±–Ω–æ–≤–∏ /—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏/—Ä–µ–µ—Å—Ç—Ä-—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π.md ‚Äî —Å–º–µ–Ω–∏ —Å—Ç–∞—Ç—É—Å—ã "–æ–∂–∏–¥–∞–µ—Ç" ‚Üí "draft"
PROMPT_EOF

    # D04 –°–∞–Ω—Ç–µ—Ö–Ω–∏–∫–∞
    cat > "$PROMPTS_DIR/D04.md" << 'PROMPT_EOF'
–ó–∞–ø–æ–ª–Ω–∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –°–ê–ù–¢–ï–•–ù–ò–ö–ê (D04) –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞ "–í–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è –®–∫–æ–ª–∞ –†–µ–º–æ–Ω—Ç–∞".

## –ü—Ä–æ—á–∏—Ç–∞–π —Å–Ω–∞—á–∞–ª–∞:
1. /CLAUDE.md
2. /—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏/—Ä–µ–µ—Å—Ç—Ä-—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π.md (—Å–µ–∫—Ü–∏—è "–°–∞–Ω—Ç–µ—Ö–Ω–∏–∫–∞ D04")
3. /—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏/—Å–∞–Ω—Ç–µ—Ö–Ω–∏–∫–∞/T-SN-001-—Ä–∞–∑–≤–æ–¥–∫–∞-–≤–æ–¥–æ—Å–Ω–∞–±–∂–µ–Ω–∏—è-–ø–ø—Ä.md ‚Äî –ø—Ä–∏–º–µ—Ä
4. /—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏/—à–∞–±–ª–æ–Ω-—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏.md

## –°–æ–∑–¥–∞–π —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ (17 —à—Ç—É–∫):

### –í–æ–¥–æ—Å–Ω–∞–±–∂–µ–Ω–∏–µ:
- T-SN-002 –†–∞–∑–≤–æ–¥–∫–∞ –º–µ—Ç–∞–ª–ª–æ–ø–ª–∞—Å—Ç–∏–∫–æ–º
- T-SN-003 –†–∞–∑–≤–æ–¥–∫–∞ —Å—à–∏—Ç—ã–º –ø–æ–ª–∏—ç—Ç–∏–ª–µ–Ω–æ–º (PEX)
- T-SN-004 –ö–æ–ª–ª–µ–∫—Ç–æ—Ä–Ω–∞—è —Ä–∞–∑–≤–æ–¥–∫–∞

### –ö–∞–Ω–∞–ª–∏–∑–∞—Ü–∏—è:
- T-SN-010 –†–∞–∑–≤–æ–¥–∫–∞ –∫–∞–Ω–∞–ª–∏–∑–∞—Ü–∏–∏ 50 –º–º
- T-SN-011 –†–∞–∑–≤–æ–¥–∫–∞ –∫–∞–Ω–∞–ª–∏–∑–∞—Ü–∏–∏ 110 –º–º
- T-SN-012 –ú–æ–Ω—Ç–∞–∂ —Ç—Ä–∞–ø–∞ –≤ –ø–æ–ª—É

### –û—Ç–æ–ø–ª–µ–Ω–∏–µ:
- T-SN-020 –†–∞–∑–≤–æ–¥–∫–∞ —Ä–∞–¥–∏–∞—Ç–æ—Ä–Ω–æ–≥–æ –æ—Ç–æ–ø–ª–µ–Ω–∏—è
- T-SN-021 –ú–æ–Ω—Ç–∞–∂ –∫–æ–ª–ª–µ–∫—Ç–æ—Ä–∞ –æ—Ç–æ–ø–ª–µ–Ω–∏—è
- T-SN-022 –¢—ë–ø–ª—ã–π –≤–æ–¥—è–Ω–æ–π –ø–æ–ª

### –û–ø—Ä–µ—Å—Å–æ–≤–∫–∞:
- T-SN-030 –û–ø—Ä–µ—Å—Å–æ–≤–∫–∞ —Å–∏—Å—Ç–µ–º—ã
- T-SN-031 –ú–æ–Ω—Ç–∞–∂ —Å–∞–Ω—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–≥–æ —à–∫–∞—Ñ–∞

### –ß–∏—Å—Ç–æ–≤–∞—è:
- T-SN-040 –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —É–Ω–∏—Ç–∞–∑–∞
- T-SN-041 –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏–Ω—Å—Ç–∞–ª–ª—è—Ü–∏–∏
- T-SN-042 –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ä–∞–∫–æ–≤–∏–Ω—ã
- T-SN-043 –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–º–µ—Å–∏—Ç–µ–ª–µ–π
- T-SN-044 –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤–∞–Ω–Ω—ã
- T-SN-045 –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –¥—É—à–µ–≤–æ–π –∫–∞–±–∏–Ω—ã
- T-SN-046 –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–æ–ª–æ—Ç–µ–Ω—Ü–µ—Å—É—à–∏—Ç–µ–ª—è

## –ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è:
–û–±–Ω–æ–≤–∏ /—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏/—Ä–µ–µ—Å—Ç—Ä-—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π.md
PROMPT_EOF

    # D09 –®—Ç—É–∫–∞—Ç—É—Ä–∫–∞
    cat > "$PROMPTS_DIR/D09.md" << 'PROMPT_EOF'
–ó–∞–ø–æ–ª–Ω–∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –®–¢–£–ö–ê–¢–£–†–ö–ê (D09) –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞ "–í–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è –®–∫–æ–ª–∞ –†–µ–º–æ–Ω—Ç–∞".

## –ü—Ä–æ—á–∏—Ç–∞–π —Å–Ω–∞—á–∞–ª–∞:
1. /CLAUDE.md
2. /—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏/—Ä–µ–µ—Å—Ç—Ä-—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π.md (—Å–µ–∫—Ü–∏—è "–®—Ç—É–∫–∞—Ç—É—Ä–∫–∞ D09")
3. /—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏/—à—Ç—É–∫–∞—Ç—É—Ä–∫–∞/T-SH-010-—É—Å—Ç–∞–Ω–æ–≤–∫–∞-–º–∞—è–∫–æ–≤.md ‚Äî –ø—Ä–∏–º–µ—Ä
4. /—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏/—à–∞–±–ª–æ–Ω-—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏.md

## –°–æ–∑–¥–∞–π —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ (16 —à—Ç—É–∫):

- T-SH-001 –ì—Ä—É–Ω—Ç–æ–≤–∫–∞ –æ—Å–Ω–æ–≤–∞–Ω–∏—è
- T-SH-011 –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –º–∞—è–∫–æ–≤ –Ω–∞ –∫—Ä–µ–ø—ë–∂
- T-SH-012 –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å—Ç—Ä—É–Ω–Ω—ã—Ö –º–∞—è–∫–æ–≤
- T-SH-020 –®—Ç—É–∫–∞—Ç—É—Ä–∫–∞ –≥–∏–ø—Å–æ–≤–æ–π —Å–º–µ—Å—å—é
- T-SH-021 –®—Ç—É–∫–∞—Ç—É—Ä–∫–∞ —Ü–µ–º–µ–Ω—Ç–Ω–æ–π —Å–º–µ—Å—å—é
- T-SH-022 –®—Ç—É–∫–∞—Ç—É—Ä–∫–∞ –ø–æ—Ç–æ–ª–∫–∞
- T-SH-030 –ú–µ—Ö–∞–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —à—Ç—É–∫–∞—Ç—É—Ä–∫–∞
- T-SH-031 –ü–æ–¥—Ä–µ–∑–∫–∞ –∏ –∑–∞–≥–ª–∞–∂–∏–≤–∞–Ω–∏–µ
- T-SH-040 –®—Ç—É–∫–∞—Ç—É—Ä–∫–∞ –æ–∫–æ–Ω–Ω—ã—Ö –æ—Ç–∫–æ—Å–æ–≤
- T-SH-041 –®—Ç—É–∫–∞—Ç—É—Ä–∫–∞ –¥–≤–µ—Ä–Ω—ã—Ö –æ—Ç–∫–æ—Å–æ–≤
- T-SH-050 –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞—â–∏—Ç–Ω—ã—Ö —É–≥–æ–ª–∫–æ–≤
- T-SH-051 –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö —É–≥–ª–æ–≤
- T-SH-060 –£–¥–∞–ª–µ–Ω–∏–µ –º–∞—è–∫–æ–≤
- T-SH-061 –ó–∞—Ç–∏—Ä–∫–∞ –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–∏
- T-SH-062 –ì–ª—è–Ω—Ü–µ–≤–∞–Ω–∏–µ

## –ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è:
–û–±–Ω–æ–≤–∏ /—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏/—Ä–µ–µ—Å—Ç—Ä-—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π.md
PROMPT_EOF

    # D12 –ü–ª–∏—Ç–∫–∞
    cat > "$PROMPTS_DIR/D12.md" << 'PROMPT_EOF'
–ó–∞–ø–æ–ª–Ω–∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –ü–õ–ò–¢–ö–ê (D12) –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞ "–í–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è –®–∫–æ–ª–∞ –†–µ–º–æ–Ω—Ç–∞".

## –ü—Ä–æ—á–∏—Ç–∞–π —Å–Ω–∞—á–∞–ª–∞:
1. /CLAUDE.md
2. /—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏/—Ä–µ–µ—Å—Ç—Ä-—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π.md (—Å–µ–∫—Ü–∏—è "–ü–ª–∏—Ç–∫–∞ D12")
3. /—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏/–ø–ª–∏—Ç–∫–∞/T-PL-001-—É–∫–ª–∞–¥–∫–∞-–∫–µ—Ä–∞–º–æ–≥—Ä–∞–Ω–∏—Ç–∞-–Ω–∞-–ø–æ–ª.md ‚Äî –≠–¢–ê–õ–û–ù
4. /—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏/—à–∞–±–ª–æ–Ω-—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏.md

## –°–æ–∑–¥–∞–π —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ (7 —à—Ç—É–∫):

- T-PL-002 –£–∫–ª–∞–¥–∫–∞ –¥–≤–æ–π–Ω—ã–º –Ω–∞–º–∞–∑–æ–º
- T-PL-010 –£–∫–ª–∞–¥–∫–∞ –ø–ª–∏—Ç–∫–∏ –Ω–∞ —Å—Ç–µ–Ω—ã
- T-PL-011 –£–∫–ª–∞–¥–∫–∞ —Ñ–∞—Ä—Ç—É–∫–∞
- T-PL-012 –£–∫–ª–∞–¥–∫–∞ –º–æ–∑–∞–∏–∫–∏
- T-PL-020 –ó–∞—Ç–∏—Ä–∫–∞ —Ü–µ–º–µ–Ω—Ç–Ω–æ–π —Å–º–µ—Å—å—é
- T-PL-021 –ó–∞—Ç–∏—Ä–∫–∞ —ç–ø–æ–∫—Å–∏–¥–Ω–æ–π —Å–º–µ—Å—å—é
- T-PL-022 –ì–µ—Ä–º–µ—Ç–∏–∑–∞—Ü–∏—è –ø—Ä–∏–º—ã–∫–∞–Ω–∏–π

## –ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è:
–û–±–Ω–æ–≤–∏ /—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏/—Ä–µ–µ—Å—Ç—Ä-—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π.md
PROMPT_EOF

    # D06 –ú–æ–Ω—Ç–∞–∂
    cat > "$PROMPTS_DIR/D06.md" << 'PROMPT_EOF'
–ó–∞–ø–æ–ª–Ω–∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –ú–û–ù–¢–ê–ñ (D06) –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞ "–í–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è –®–∫–æ–ª–∞ –†–µ–º–æ–Ω—Ç–∞".

## –ü—Ä–æ—á–∏—Ç–∞–π —Å–Ω–∞—á–∞–ª–∞:
1. /CLAUDE.md
2. /—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏/—Ä–µ–µ—Å—Ç—Ä-—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π.md (—Å–µ–∫—Ü–∏—è "–ú–æ–Ω—Ç–∞–∂ D06")
3. /—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏/–º–æ–Ω—Ç–∞–∂/T-MN-001-–∫–ª–∞–¥–∫–∞-–≥–∞–∑–æ–±–ª–æ–∫–∞.md ‚Äî –ø—Ä–∏–º–µ—Ä
4. /—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏/—à–∞–±–ª–æ–Ω-—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏.md

## –°–æ–∑–¥–∞–π —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ (16 —à—Ç—É–∫):

- T-MN-002 –ö–ª–∞–¥–∫–∞ –∏–∑ –∫–∏—Ä–ø–∏—á–∞
- T-MN-003 –ö–ª–∞–¥–∫–∞ –∏–∑ –ø–∞–∑–æ–≥—Ä–µ–±–Ω—è
- T-MN-010 –ú–æ–Ω—Ç–∞–∂ –∫–∞—Ä–∫–∞—Å–∞ –ì–ö–õ –ø–µ—Ä–µ–≥–æ—Ä–æ–¥–∫–∏
- T-MN-011 –û–±—à–∏–≤–∫–∞ –ì–ö–õ –≤ –æ–¥–∏–Ω —Å–ª–æ–π
- T-MN-012 –û–±—à–∏–≤–∫–∞ –ì–ö–õ –≤ –¥–≤–∞ —Å–ª–æ—è
- T-MN-013 –ó–≤—É–∫–æ–∏–∑–æ–ª—è—Ü–∏—è –ø–µ—Ä–µ–≥–æ—Ä–æ–¥–æ–∫
- T-MN-020 –û–¥–Ω–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π –ø–æ—Ç–æ–ª–æ–∫ –ì–ö–õ
- T-MN-021 –ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π –ø–æ—Ç–æ–ª–æ–∫
- T-MN-022 –ö–æ—Ä–æ–± —Å –ø–æ–¥—Å–≤–µ—Ç–∫–æ–π
- T-MN-030 –ö–æ—Ä–æ–± –¥–ª—è —Ç—Ä—É–±
- T-MN-031 –ù–∏—à–∞ –ø–æ–¥ —à—Ç–æ—Ä—ã
- T-MN-032 –ù–∏—à–∞ –ø–æ–¥ –¢–í
- T-MN-040 –£—Å–∏–ª–µ–Ω–∏–µ –¥–≤–µ—Ä–Ω–æ–≥–æ –ø—Ä–æ—ë–º–∞
- T-MN-041 –ó–∞–∫–ª–∞–¥–Ω—ã–µ –ø–æ–¥ –º–µ–±–µ–ª—å
- T-MN-042 –ó–∞–∫–ª–∞–¥–Ω—ã–µ –ø–æ–¥ –±–æ–π–ª–µ—Ä/–∫–æ–Ω–¥–∏—Ü–∏–æ–Ω–µ—Ä

## –ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è:
–û–±–Ω–æ–≤–∏ /—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏/—Ä–µ–µ—Å—Ç—Ä-—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π.md
PROMPT_EOF

    # D10 –ü–æ–∫—Ä–∞—Å–∫–∞
    cat > "$PROMPTS_DIR/D10.md" << 'PROMPT_EOF'
–ó–∞–ø–æ–ª–Ω–∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –ü–û–ö–†–ê–°–ö–ê (D10) –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞ "–í–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è –®–∫–æ–ª–∞ –†–µ–º–æ–Ω—Ç–∞".

## –ü—Ä–æ—á–∏—Ç–∞–π —Å–Ω–∞—á–∞–ª–∞:
1. /CLAUDE.md
2. /—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏/—Ä–µ–µ—Å—Ç—Ä-—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π.md (—Å–µ–∫—Ü–∏—è "–ü–æ–∫—Ä–∞—Å–∫–∞ D10")
3. /—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏/–ø–æ–∫—Ä–∞—Å–∫–∞/T-PK-001-–ø–æ–∫—Ä–∞—Å–∫–∞-—Å—Ç–µ–Ω-–≤–∞–ª–∏–∫–æ–º.md ‚Äî –ø—Ä–∏–º–µ—Ä
4. /—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏/—à–∞–±–ª–æ–Ω-—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏.md

## –°–æ–∑–¥–∞–π —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ (13 —à—Ç—É–∫):

- T-PK-002 –£–∫—Ä—ã–≤–∫–∞ –∏ –∑–∞—â–∏—Ç–∞ –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–µ–π
- T-PK-003 –ì—Ä—É–Ω—Ç–æ–≤–∫–∞ –ø–µ—Ä–µ–¥ –ø–æ–∫—Ä–∞—Å–∫–æ–π
- T-PK-010 –ü–æ–∫—Ä–∞—Å–∫–∞ –ø–æ—Ç–æ–ª–∫–∞ –≤–∞–ª–∏–∫–æ–º
- T-PK-011 –ü–æ–∫—Ä–∞—Å–∫–∞ –ø–æ—Ç–æ–ª–∫–∞ –∫—Ä–∞—Å–∫–æ–ø—É–ª—å—Ç–æ–º
- T-PK-020 –ü–æ–∫—Ä–∞—Å–∫–∞ —Å—Ç–µ–Ω –∫—Ä–∞—Å–∫–æ–ø—É–ª—å—Ç–æ–º
- T-PK-021 –ü–æ–∫—Ä–∞—Å–∫–∞ –≤ –¥–≤–∞ —Ü–≤–µ—Ç–∞
- T-PK-022 –ü–æ–∫—Ä–∞—Å–∫–∞ —Å —Ç—Ä–∞—Ñ–∞—Ä–µ—Ç–æ–º
- T-PK-030 –ü–æ–∫—Ä–∞—Å–∫–∞ –æ—Ç–∫–æ—Å–æ–≤
- T-PK-031 –ü–æ–∫—Ä–∞—Å–∫–∞ —Ä–∞–¥–∏–∞—Ç–æ—Ä–æ–≤
- T-PK-032 –ü–æ–∫—Ä–∞—Å–∫–∞ —Ç—Ä—É–±
- T-PK-040 –î–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω–∞—è –ø–æ–∫—Ä–∞—Å–∫–∞ "–ø–æ–¥ –±–µ—Ç–æ–Ω"
- T-PK-041 –ü–æ–∫—Ä–∞—Å–∫–∞ —Å —ç—Ñ—Ñ–µ–∫—Ç–æ–º –≤–µ–ª—é—Ä–∞
- T-PK-042 –ü–æ–∫—Ä–∞—Å–∫–∞ —Å —ç—Ñ—Ñ–µ–∫—Ç–æ–º —à—ë–ª–∫–∞

## –ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è:
–û–±–Ω–æ–≤–∏ /—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏/—Ä–µ–µ—Å—Ç—Ä-—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π.md
PROMPT_EOF

    # D13 –ü–æ–ª—ã —á–µ—Ä–Ω–æ–≤—ã–µ
    cat > "$PROMPTS_DIR/D13.md" << 'PROMPT_EOF'
–ó–∞–ø–æ–ª–Ω–∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –ü–û–õ–´ –ß–ï–†–ù–û–í–´–ï (D13) –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞ "–í–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è –®–∫–æ–ª–∞ –†–µ–º–æ–Ω—Ç–∞".

## –ü—Ä–æ—á–∏—Ç–∞–π —Å–Ω–∞—á–∞–ª–∞:
1. /CLAUDE.md
2. /—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏/—Ä–µ–µ—Å—Ç—Ä-—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π.md (—Å–µ–∫—Ü–∏—è "–ü–æ–ª—ã —á–µ—Ä–Ω–æ–≤—ã–µ D13")
3. /—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏/–ø–æ–ª—ã-—á–µ—Ä–Ω–æ–≤—ã–µ/T-PC-040-–º–æ–∫—Ä–∞—è-—Å—Ç—è–∂–∫–∞-–ø–æ-–º–∞—è–∫–∞–º.md ‚Äî –ø—Ä–∏–º–µ—Ä
4. /—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏/—à–∞–±–ª–æ–Ω-—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏.md

## –°–æ–∑–¥–∞–π —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ (14 —à—Ç—É–∫):

- T-PC-000 –û—á–∏—Å—Ç–∫–∞ –∏ —Ä–µ–º–æ–Ω—Ç –æ—Å–Ω–æ–≤–∞–Ω–∏—è
- T-PC-001 –î–µ–º–ø—Ñ–µ—Ä–Ω–∞—è –ª–µ–Ω—Ç–∞ –ø–æ –ø–µ—Ä–∏–º–µ—Ç—Ä—É
- T-PC-010 –£–∫–ª–∞–¥–∫–∞ –≠–ü–ü–° –Ω–∞ –ø–æ–ª
- T-PC-011 –£–∫–ª–∞–¥–∫–∞ –ø–µ–Ω–æ–ø–æ–ª–∏—Å—Ç–∏—Ä–æ–ª–∞
- T-PC-012 –ì–∏–¥—Ä–æ–∏–∑–æ–ª—è—Ü–∏—è –ø–æ–¥ —Å—Ç—è–∂–∫—É
- T-PC-020 –ê—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–µ—Ç–∫–æ–π
- T-PC-021 –ê—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∏–±—Ä–æ–π
- T-PC-030 –í–æ–¥—è–Ω–æ–π —Ç—ë–ø–ª—ã–π –ø–æ–ª
- T-PC-031 –≠–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–∏–π –∫–∞–±–µ–ª—å–Ω—ã–π —Ç—ë–ø–ª—ã–π –ø–æ–ª
- T-PC-032 –≠–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–∏–µ –º–∞—Ç—ã
- T-PC-041 –ü–æ–ª—É—Å—É—Ö–∞—è —Å—Ç—è–∂–∫–∞
- T-PC-042 –°—É—Ö–∞—è —Å—Ç—è–∂–∫–∞ Knauf
- T-PC-050 –ù–∞–ª–∏–≤–Ω–æ–π –ø–æ–ª —Ñ–∏–Ω–∏—à–Ω—ã–π
- T-PC-051 –ù–∞–ª–∏–≤–Ω–æ–π –ø–æ–ª —Ç–æ–ª—Å—Ç–æ—Å–ª–æ–π–Ω—ã–π

## –ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è:
–û–±–Ω–æ–≤–∏ /—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏/—Ä–µ–µ—Å—Ç—Ä-—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π.md
PROMPT_EOF

    print_status "–ü—Ä–æ–º—Ç—ã –§–∞–∑—ã 1 —Å–æ–∑–¥–∞–Ω—ã (7 —Ñ–∞–π–ª–æ–≤)"

    # –°–æ–∑–¥–∞—ë–º –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø—Ä–æ–º—Ç—ã (–§–∞–∑–∞ 2 –∏ 3)...
    # D08, D01, D05, D16, D11, D14, D15, D17, D07, D03, D18, D00

    # D01 –î–µ–º–æ–Ω—Ç–∞–∂
    cat > "$PROMPTS_DIR/D01.md" << 'PROMPT_EOF'
–ó–∞–ø–æ–ª–Ω–∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –î–ï–ú–û–ù–¢–ê–ñ (D01) –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞ "–í–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è –®–∫–æ–ª–∞ –†–µ–º–æ–Ω—Ç–∞".

–ü—Ä–æ—á–∏—Ç–∞–π: /—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏/—Ä–µ–µ—Å—Ç—Ä-—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π.md, /—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏/–¥–µ–º–æ–Ω—Ç–∞–∂/T-DM-001-–¥–µ–º–æ–Ω—Ç–∞–∂-–∫–∏—Ä–ø–∏—á–Ω—ã—Ö-–ø–µ—Ä–µ–≥–æ—Ä–æ–¥–æ–∫.md, /—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏/—à–∞–±–ª–æ–Ω-—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏.md

–°–æ–∑–¥–∞–π –≤—Å–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ T-DM-002..T-DM-060 –∏–∑ —Ä–µ–µ—Å—Ç—Ä–∞ —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º "–æ–∂–∏–¥–∞–µ—Ç".
–ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –æ–±–Ω–æ–≤–∏ —Ä–µ–µ—Å—Ç—Ä-—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π.md.
PROMPT_EOF

    # D08 –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å—Ç–µ–Ω
    cat > "$PROMPTS_DIR/D08.md" << 'PROMPT_EOF'
–ó–∞–ø–æ–ª–Ω–∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –ü–û–î–ì–û–¢–û–í–ö–ê –°–¢–ï–ù (D08) –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞ "–í–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è –®–∫–æ–ª–∞ –†–µ–º–æ–Ω—Ç–∞".

–ü—Ä–æ—á–∏—Ç–∞–π: /—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏/—Ä–µ–µ—Å—Ç—Ä-—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π.md, /—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏/–ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞-—Å—Ç–µ–Ω/T-PD-001-–≥—Ä—É–Ω—Ç–æ–≤–∫–∞-–≥–ª—É–±–æ–∫–æ–≥–æ-–ø—Ä–æ–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏—è.md, /—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏/—à–∞–±–ª–æ–Ω-—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏.md

–°–æ–∑–¥–∞–π –≤—Å–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ T-PD-002..T-PD-041 –∏–∑ —Ä–µ–µ—Å—Ç—Ä–∞ —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º "–æ–∂–∏–¥–∞–µ—Ç".
–ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –æ–±–Ω–æ–≤–∏ —Ä–µ–µ—Å—Ç—Ä-—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π.md.
PROMPT_EOF

    # D05 –ö–ª–∏–º–∞—Ç
    cat > "$PROMPTS_DIR/D05.md" << 'PROMPT_EOF'
–ó–∞–ø–æ–ª–Ω–∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –ö–õ–ò–ú–ê–¢ (D05) –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞ "–í–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è –®–∫–æ–ª–∞ –†–µ–º–æ–Ω—Ç–∞".

–ü—Ä–æ—á–∏—Ç–∞–π: /—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏/—Ä–µ–µ—Å—Ç—Ä-—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π.md, /—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏/–∫–ª–∏–º–∞—Ç/T-KL-001-–ø—Ä–æ–∫–ª–∞–¥–∫–∞-—Ç—Ä–∞—Å—Å-–∫–æ–Ω–¥–∏—Ü–∏–æ–Ω–µ—Ä–∞.md, /—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏/—à–∞–±–ª–æ–Ω-—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏.md

–°–æ–∑–¥–∞–π –≤—Å–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ T-KL-002..T-KL-032 –∏–∑ —Ä–µ–µ—Å—Ç—Ä–∞ —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º "–æ–∂–∏–¥–∞–µ—Ç".
–ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –æ–±–Ω–æ–≤–∏ —Ä–µ–µ—Å—Ç—Ä-—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π.md.
PROMPT_EOF

    # D16 –î–≤–µ—Ä–∏ –º–µ–∂–∫–æ–º–Ω–∞—Ç–Ω—ã–µ
    cat > "$PROMPTS_DIR/D16.md" << 'PROMPT_EOF'
–ó–∞–ø–æ–ª–Ω–∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –î–í–ï–†–ò –ú–ï–ñ–ö–û–ú–ù–ê–¢–ù–´–ï (D16) –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞ "–í–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è –®–∫–æ–ª–∞ –†–µ–º–æ–Ω—Ç–∞".

–ü—Ä–æ—á–∏—Ç–∞–π: /—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏/—Ä–µ–µ—Å—Ç—Ä-—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π.md, /—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏/–¥–≤–µ—Ä–∏-–º–µ–∂–∫–æ–º–Ω–∞—Ç–Ω—ã–µ/T-DI-001-—É—Å—Ç–∞–Ω–æ–≤–∫–∞-—Ä–∞—Å–ø–∞—à–Ω–æ–π-–¥–≤–µ—Ä–∏.md, /—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏/—à–∞–±–ª–æ–Ω-—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏.md

–°–æ–∑–¥–∞–π –≤—Å–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ T-DI-002..T-DI-043 –∏–∑ —Ä–µ–µ—Å—Ç—Ä–∞ —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º "–æ–∂–∏–¥–∞–µ—Ç".
–ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –æ–±–Ω–æ–≤–∏ —Ä–µ–µ—Å—Ç—Ä-—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π.md.
PROMPT_EOF

    # –û—Å—Ç–∞–ª—å–Ω—ã–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è (–∫–æ—Ä–æ—Ç–∫–∏–µ –ø—Ä–æ–º—Ç—ã)
    for dir_info in "D03:—Å–ª–∞–±–æ—Ç–æ—á–∫–∞:T-SL" "D07:–∏–∑–æ–ª—è—Ü–∏—è:T-IZ" "D11:–æ–±–æ–∏:T-OB" "D14:–ø–æ–ª—ã-—á–∏—Å—Ç–æ–≤—ã–µ:T-PF" "D15:–æ–∫–Ω–∞:T-OK" "D17:–¥–≤–µ—Ä–∏-–≤—Ö–æ–¥–Ω—ã–µ:T-DV" "D18:—Ñ–∞—Å–∞–¥:T-FS" "D00:–∫—É–ª—å—Ç—É—Ä–∞-–ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞:T-KP"; do
        IFS=':' read -r d_id d_folder d_prefix <<< "$dir_info"
        cat > "$PROMPTS_DIR/$d_id.md" << PROMPT_EOF
–ó–∞–ø–æ–ª–Ω–∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –¥–ª—è –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è $d_id –ø—Ä–æ–µ–∫—Ç–∞ "–í–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è –®–∫–æ–ª–∞ –†–µ–º–æ–Ω—Ç–∞".

–ü—Ä–æ—á–∏—Ç–∞–π: /—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏/—Ä–µ–µ—Å—Ç—Ä-—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π.md, /—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏/$d_folder/, /—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏/—à–∞–±–ª–æ–Ω-—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏.md

–°–æ–∑–¥–∞–π –≤—Å–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ $d_prefix-XXX –∏–∑ —Ä–µ–µ—Å—Ç—Ä–∞ —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º "–æ–∂–∏–¥–∞–µ—Ç".
–ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –æ–±–Ω–æ–≤–∏ —Ä–µ–µ—Å—Ç—Ä-—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π.md.
PROMPT_EOF
    done

    print_status "–í—Å–µ –ø—Ä–æ–º—Ç—ã —Å–æ–∑–¥–∞–Ω—ã (19 —Ñ–∞–π–ª–æ–≤)"
}

# =============================================================================
# –ì–ª–∞–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞
# =============================================================================

# –ü–∞—Ä—Å–∏–Ω–≥ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤
TARGET=""
while [[ $# -gt 0 ]]; do
    case $1 in
        --parallel)
            PARALLEL="$2"
            shift 2
            ;;
        --dry-run)
            DRY_RUN=true
            shift
            ;;
        --progress)
            show_progress
            exit 0
            ;;
        --generate)
            setup_dirs
            generate_prompts
            exit 0
            ;;
        --help|-h)
            echo "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: $0 [–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ|phase1|phase2|phase3|all] [–æ–ø—Ü–∏–∏]"
            echo ""
            echo "–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è: D00-D18"
            echo "–§–∞–∑—ã: phase1, phase2, phase3, all"
            echo ""
            echo "–û–ø—Ü–∏–∏:"
            echo "  --parallel N   –ó–∞–ø—É—Å—Ç–∏—Ç—å N –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ"
            echo "  --dry-run      –ü–æ–∫–∞–∑–∞—Ç—å —á—Ç–æ –±—É–¥–µ—Ç –¥–µ–ª–∞—Ç—å, –Ω–µ –∑–∞–ø—É—Å–∫–∞—è"
            echo "  --progress     –ü–æ–∫–∞–∑–∞—Ç—å —Ç–µ–∫—É—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å"
            echo "  --generate     –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª—ã –ø—Ä–æ–º—Ç–æ–≤"
            echo "  --help         –ü–æ–∫–∞–∑–∞—Ç—å —ç—Ç—É —Å–ø—Ä–∞–≤–∫—É"
            exit 0
            ;;
        *)
            TARGET="$1"
            shift
            ;;
    esac
done

print_header
setup_dirs

# –ï—Å–ª–∏ –ø—Ä–æ–º—Ç—ã –Ω–µ —Å–æ–∑–¥–∞–Ω—ã ‚Äî —Å–æ–∑–¥–∞—ë–º
if [ ! -f "$PROMPTS_DIR/D02.md" ]; then
    generate_prompts
fi

# –û–ø—Ä–µ–¥–µ–ª—è–µ–º –∫–∞–∫–∏–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–ø—É—Å–∫–∞—Ç—å
PHASE1=(D02 D04 D09 D12 D06 D10 D13)
PHASE2=(D08 D01 D05 D16)
PHASE3=(D11 D14 D15 D17 D07 D03 D18 D00)

case $TARGET in
    "phase1")
        print_info "–ó–∞–ø—É—Å–∫ –§–∞–∑—ã 1: ${PHASE1[*]}"
        run_parallel "${PHASE1[@]}"
        ;;
    "phase2")
        print_info "–ó–∞–ø—É—Å–∫ –§–∞–∑—ã 2: ${PHASE2[*]}"
        run_parallel "${PHASE2[@]}"
        ;;
    "phase3")
        print_info "–ó–∞–ø—É—Å–∫ –§–∞–∑—ã 3: ${PHASE3[*]}"
        run_parallel "${PHASE3[@]}"
        ;;
    "all")
        ALL=("${PHASE1[@]}" "${PHASE2[@]}" "${PHASE3[@]}")
        print_info "–ó–∞–ø—É—Å–∫ –í–°–ï–• –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π: ${ALL[*]}"
        run_parallel "${ALL[@]}"
        ;;
    D[0-9][0-9])
        run_claude "$TARGET"
        ;;
    "")
        print_warning "–ù–µ —É–∫–∞–∑–∞–Ω–æ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ"
        echo ""
        echo "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: $0 [–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ|phase1|phase2|phase3|all]"
        echo ""
        show_progress
        ;;
    *)
        print_error "–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: $TARGET"
        exit 1
        ;;
esac

echo ""
show_progress
