<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–í–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è –®–∫–æ–ª–∞ –†–µ–º–æ–Ω—Ç–∞ ‚Äî –ö–∞—Ä—Ç–∞ –ø—Ä–æ–µ–∫—Ç–∞</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            min-height: 100vh;
            color: #fff;
        }

        .header {
            padding: 20px 40px;
            background: rgba(0,0,0,0.3);
            display: flex;
            justify-content: space-between;
            align-items: center;
            backdrop-filter: blur(10px);
        }

        .header h1 {
            font-size: 24px;
            font-weight: 600;
        }

        .stats {
            display: flex;
            gap: 30px;
        }

        .stat {
            text-align: center;
        }

        .stat-value {
            font-size: 28px;
            font-weight: 700;
            color: #4ade80;
        }

        .stat-label {
            font-size: 12px;
            color: #888;
            text-transform: uppercase;
        }

        .filters {
            padding: 15px 40px;
            background: rgba(0,0,0,0.2);
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .filter-btn {
            padding: 8px 16px;
            border: 1px solid #444;
            background: transparent;
            color: #fff;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 13px;
        }

        .filter-btn:hover {
            background: rgba(255,255,255,0.1);
        }

        .filter-btn.active {
            background: #4ade80;
            border-color: #4ade80;
            color: #000;
        }

        .main {
            padding: 30px 40px;
            display: flex;
            gap: 30px;
        }

        .timeline {
            flex: 2;
        }

        .sidebar {
            flex: 1;
            max-width: 350px;
        }

        .stage {
            margin-bottom: 20px;
        }

        .stage-header {
            font-size: 14px;
            text-transform: uppercase;
            letter-spacing: 2px;
            color: #888;
            margin-bottom: 15px;
            padding-left: 10px;
            border-left: 3px solid #4ade80;
        }

        .stage-header.chernovaya {
            border-color: #f97316;
        }

        .stage-header.chistovaya {
            border-color: #3b82f6;
        }

        .directions {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
        }

        .direction {
            background: rgba(255,255,255,0.05);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 12px;
            padding: 15px;
            width: calc(25% - 9px);
            min-width: 180px;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }

        .direction:hover {
            transform: translateY(-3px);
            background: rgba(255,255,255,0.1);
            border-color: rgba(255,255,255,0.2);
        }

        .direction.selected {
            border-color: #4ade80;
            background: rgba(74, 222, 128, 0.1);
        }

        .direction-id {
            font-size: 11px;
            color: #888;
            margin-bottom: 5px;
        }

        .direction-name {
            font-size: 15px;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .direction-tech {
            font-size: 12px;
            color: #4ade80;
        }

        .direction-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            width: 8px;
            height: 8px;
            border-radius: 50%;
        }

        .direction-badge.chernovaya {
            background: #f97316;
        }

        .direction-badge.chistovaya {
            background: #3b82f6;
        }

        .direction-badge.both {
            background: linear-gradient(135deg, #f97316 50%, #3b82f6 50%);
        }

        /* –ë–ª–æ–∫–∏ */
        .block-kommunikacii .direction { border-left: 3px solid #f59e0b; }
        .block-konstruktiv .direction { border-left: 3px solid #8b5cf6; }
        .block-otdelka .direction { border-left: 3px solid #ec4899; }
        .block-poly .direction { border-left: 3px solid #06b6d4; }
        .block-dveri .direction { border-left: 3px solid #10b981; }

        .detail-panel {
            background: rgba(255,255,255,0.05);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 16px;
            padding: 25px;
            position: sticky;
            top: 20px;
        }

        .detail-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 20px;
        }

        .detail-id {
            font-size: 12px;
            color: #4ade80;
            margin-bottom: 5px;
        }

        .detail-name {
            font-size: 22px;
            font-weight: 700;
        }

        .detail-stages {
            display: flex;
            gap: 5px;
        }

        .stage-tag {
            font-size: 10px;
            padding: 3px 8px;
            border-radius: 10px;
            text-transform: uppercase;
        }

        .stage-tag.chernovaya {
            background: rgba(249, 115, 22, 0.2);
            color: #f97316;
        }

        .stage-tag.chistovaya {
            background: rgba(59, 130, 246, 0.2);
            color: #3b82f6;
        }

        .detail-section {
            margin-bottom: 20px;
        }

        .detail-section-title {
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: #888;
            margin-bottom: 10px;
        }

        .tech-list {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .tech-item {
            background: rgba(0,0,0,0.2);
            padding: 10px 12px;
            border-radius: 8px;
            font-size: 13px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .tech-id {
            color: #888;
            font-size: 11px;
        }

        .deps-list {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
        }

        .dep-tag {
            font-size: 11px;
            padding: 4px 10px;
            border-radius: 12px;
            background: rgba(255,255,255,0.1);
        }

        .dep-tag.before {
            border: 1px solid #f97316;
            color: #f97316;
        }

        .dep-tag.after {
            border: 1px solid #3b82f6;
            color: #3b82f6;
        }

        .progress-bar {
            height: 6px;
            background: rgba(255,255,255,0.1);
            border-radius: 3px;
            overflow: hidden;
            margin-top: 5px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #4ade80, #22c55e);
            border-radius: 3px;
            transition: width 0.5s ease;
        }

        .empty-state {
            text-align: center;
            padding: 40px;
            color: #666;
        }

        .empty-state-icon {
            font-size: 48px;
            margin-bottom: 15px;
        }

        /* Connections visualization */
        .graph-view {
            display: none;
            padding: 20px;
        }

        .graph-view.active {
            display: block;
        }

        .view-toggle {
            display: flex;
            gap: 5px;
            background: rgba(0,0,0,0.3);
            padding: 4px;
            border-radius: 8px;
        }

        .view-btn {
            padding: 6px 12px;
            border: none;
            background: transparent;
            color: #888;
            border-radius: 6px;
            cursor: pointer;
            font-size: 13px;
        }

        .view-btn.active {
            background: rgba(255,255,255,0.1);
            color: #fff;
        }

        /* Canvas –¥–ª—è –≥—Ä–∞—Ñ–∞ */
        #graphCanvas {
            width: 100%;
            height: 500px;
            background: rgba(0,0,0,0.2);
            border-radius: 12px;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>–í–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è –®–∫–æ–ª–∞ –†–µ–º–æ–Ω—Ç–∞</h1>
        <div class="view-toggle">
            <button class="view-btn active" onclick="showView('cards')">–ö–∞—Ä—Ç–æ—á–∫–∏</button>
            <button class="view-btn" onclick="showView('graph')">–ì—Ä–∞—Ñ —Å–≤—è–∑–µ–π</button>
        </div>
        <div class="stats">
            <div class="stat">
                <div class="stat-value">19</div>
                <div class="stat-label">–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π</div>
            </div>
            <div class="stat">
                <div class="stat-value">19</div>
                <div class="stat-label">–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–π</div>
            </div>
            <div class="stat">
                <div class="stat-value" id="progressPercent">10%</div>
                <div class="stat-label">–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å</div>
            </div>
        </div>
    </div>

    <div class="filters">
        <button class="filter-btn active" data-filter="all">–í—Å–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è</button>
        <button class="filter-btn" data-filter="chernovaya">–ß–µ—Ä–Ω–æ–≤—ã–µ</button>
        <button class="filter-btn" data-filter="chistovaya">–ß–∏—Å—Ç–æ–≤—ã–µ</button>
        <button class="filter-btn" data-filter="kommunikacii">–ö–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏</button>
        <button class="filter-btn" data-filter="otdelka">–û—Ç–¥–µ–ª–∫–∞</button>
        <button class="filter-btn" data-filter="poly">–ü–æ–ª—ã</button>
        <button class="filter-btn" data-filter="dveri">–î–≤–µ—Ä–∏/–û–∫–Ω–∞</button>
    </div>

    <div class="main" id="cardsView">
        <div class="timeline">
            <!-- –°–∏—Å—Ç–µ–º–Ω–æ–µ -->
            <div class="stage">
                <div class="stage-header">–°–∏—Å—Ç–µ–º–Ω–æ–µ (–≤—Å–µ–≥–¥–∞)</div>
                <div class="directions">
                    <div class="direction" data-id="D00" data-block="system" data-stages="both">
                        <span class="direction-badge both"></span>
                        <div class="direction-id">D00</div>
                        <div class="direction-name">–ö—É–ª—å—Ç—É—Ä–∞ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞</div>
                        <div class="direction-tech">1 —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è</div>
                    </div>
                </div>
            </div>

            <!-- –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ -->
            <div class="stage">
                <div class="stage-header chernovaya">–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞</div>
                <div class="directions">
                    <div class="direction" data-id="D01" data-block="podgotovka" data-stages="chernovaya">
                        <span class="direction-badge chernovaya"></span>
                        <div class="direction-id">D01</div>
                        <div class="direction-name">–î–µ–º–æ–Ω—Ç–∞–∂</div>
                        <div class="direction-tech">1 —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è</div>
                    </div>
                </div>
            </div>

            <!-- –ö–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏ -->
            <div class="stage block-kommunikacii">
                <div class="stage-header chernovaya">–ö–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏ (—á–µ—Ä–Ω–æ–≤—ã–µ)</div>
                <div class="directions">
                    <div class="direction" data-id="D02" data-block="kommunikacii" data-stages="both">
                        <span class="direction-badge both"></span>
                        <div class="direction-id">D02</div>
                        <div class="direction-name">–≠–ª–µ–∫—Ç—Ä–∏–∫–∞</div>
                        <div class="direction-tech">1 —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è</div>
                    </div>
                    <div class="direction" data-id="D03" data-block="kommunikacii" data-stages="both">
                        <span class="direction-badge both"></span>
                        <div class="direction-id">D03</div>
                        <div class="direction-name">–°–ª–∞–±–æ—Ç–æ—á–∫–∞</div>
                        <div class="direction-tech">1 —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è</div>
                    </div>
                    <div class="direction" data-id="D04" data-block="kommunikacii" data-stages="both">
                        <span class="direction-badge both"></span>
                        <div class="direction-id">D04</div>
                        <div class="direction-name">–°–∞–Ω—Ç–µ—Ö–Ω–∏–∫–∞</div>
                        <div class="direction-tech">1 —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è</div>
                    </div>
                    <div class="direction" data-id="D05" data-block="kommunikacii" data-stages="both">
                        <span class="direction-badge both"></span>
                        <div class="direction-id">D05</div>
                        <div class="direction-name">–ö–ª–∏–º–∞—Ç</div>
                        <div class="direction-tech">1 —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è</div>
                    </div>
                </div>
            </div>

            <!-- –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–∏–≤ -->
            <div class="stage block-konstruktiv">
                <div class="stage-header chernovaya">–ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–∏–≤</div>
                <div class="directions">
                    <div class="direction" data-id="D06" data-block="konstruktiv" data-stages="both">
                        <span class="direction-badge both"></span>
                        <div class="direction-id">D06</div>
                        <div class="direction-name">–ú–æ–Ω—Ç–∞–∂</div>
                        <div class="direction-tech">1 —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è</div>
                    </div>
                    <div class="direction" data-id="D07" data-block="konstruktiv" data-stages="chernovaya">
                        <span class="direction-badge chernovaya"></span>
                        <div class="direction-id">D07</div>
                        <div class="direction-name">–ò–∑–æ–ª—è—Ü–∏—è</div>
                        <div class="direction-tech">1 —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è</div>
                    </div>
                </div>
            </div>

            <!-- –ü–æ–ª—ã —á–µ—Ä–Ω–æ–≤—ã–µ -->
            <div class="stage block-poly">
                <div class="stage-header chernovaya">–ü–æ–ª—ã</div>
                <div class="directions">
                    <div class="direction" data-id="D13" data-block="poly" data-stages="chernovaya">
                        <span class="direction-badge chernovaya"></span>
                        <div class="direction-id">D13</div>
                        <div class="direction-name">–ü–æ–ª—ã —á–µ—Ä–Ω–æ–≤—ã–µ</div>
                        <div class="direction-tech">1 —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è</div>
                    </div>
                    <div class="direction" data-id="D14" data-block="poly" data-stages="chistovaya">
                        <span class="direction-badge chistovaya"></span>
                        <div class="direction-id">D14</div>
                        <div class="direction-name">–ü–æ–ª—ã —á–∏—Å—Ç–æ–≤—ã–µ</div>
                        <div class="direction-tech">1 —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è</div>
                    </div>
                </div>
            </div>

            <!-- –û—Ç–¥–µ–ª–∫–∞ -->
            <div class="stage block-otdelka">
                <div class="stage-header">–û—Ç–¥–µ–ª–∫–∞</div>
                <div class="directions">
                    <div class="direction" data-id="D08" data-block="otdelka" data-stages="chernovaya">
                        <span class="direction-badge chernovaya"></span>
                        <div class="direction-id">D08</div>
                        <div class="direction-name">–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å—Ç–µ–Ω</div>
                        <div class="direction-tech">1 —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è</div>
                    </div>
                    <div class="direction" data-id="D09" data-block="otdelka" data-stages="chernovaya">
                        <span class="direction-badge chernovaya"></span>
                        <div class="direction-id">D09</div>
                        <div class="direction-name">–®—Ç—É–∫–∞—Ç—É—Ä–∫–∞</div>
                        <div class="direction-tech">1 —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è</div>
                    </div>
                    <div class="direction" data-id="D10" data-block="otdelka" data-stages="chistovaya">
                        <span class="direction-badge chistovaya"></span>
                        <div class="direction-id">D10</div>
                        <div class="direction-name">–ü–æ–∫—Ä–∞—Å–∫–∞</div>
                        <div class="direction-tech">1 —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è</div>
                    </div>
                    <div class="direction" data-id="D11" data-block="otdelka" data-stages="chistovaya">
                        <span class="direction-badge chistovaya"></span>
                        <div class="direction-id">D11</div>
                        <div class="direction-name">–û–±–æ–∏</div>
                        <div class="direction-tech">1 —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è</div>
                    </div>
                    <div class="direction" data-id="D12" data-block="otdelka" data-stages="chistovaya">
                        <span class="direction-badge chistovaya"></span>
                        <div class="direction-id">D12</div>
                        <div class="direction-name">–ü–ª–∏—Ç–∫–∞</div>
                        <div class="direction-tech">1 —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è</div>
                    </div>
                </div>
            </div>

            <!-- –î–≤–µ—Ä–∏ –∏ –æ–∫–Ω–∞ -->
            <div class="stage block-dveri">
                <div class="stage-header chistovaya">–î–≤–µ—Ä–∏ –∏ –æ–∫–Ω–∞</div>
                <div class="directions">
                    <div class="direction" data-id="D15" data-block="dveri" data-stages="chistovaya">
                        <span class="direction-badge chistovaya"></span>
                        <div class="direction-id">D15</div>
                        <div class="direction-name">–û–∫–Ω–∞</div>
                        <div class="direction-tech">1 —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è</div>
                    </div>
                    <div class="direction" data-id="D16" data-block="dveri" data-stages="chistovaya">
                        <span class="direction-badge chistovaya"></span>
                        <div class="direction-id">D16</div>
                        <div class="direction-name">–î–≤–µ—Ä–∏ –º–µ–∂–∫–æ–º–Ω–∞—Ç–Ω—ã–µ</div>
                        <div class="direction-tech">1 —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è</div>
                    </div>
                    <div class="direction" data-id="D17" data-block="dveri" data-stages="chistovaya">
                        <span class="direction-badge chistovaya"></span>
                        <div class="direction-id">D17</div>
                        <div class="direction-name">–î–≤–µ—Ä–∏ –≤—Ö–æ–¥–Ω—ã–µ</div>
                        <div class="direction-tech">1 —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è</div>
                    </div>
                </div>
            </div>

            <!-- –§–∞—Å–∞–¥ -->
            <div class="stage">
                <div class="stage-header">–§–∞—Å–∞–¥ (–æ—Ç–¥–µ–ª—å–Ω—ã–π —Ü–∏–∫–ª)</div>
                <div class="directions">
                    <div class="direction" data-id="D18" data-block="fasad" data-stages="both">
                        <span class="direction-badge both"></span>
                        <div class="direction-id">D18</div>
                        <div class="direction-name">–§–∞—Å–∞–¥</div>
                        <div class="direction-tech">1 —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="sidebar">
            <div class="detail-panel" id="detailPanel">
                <div class="empty-state">
                    <div class="empty-state-icon">üëÜ</div>
                    <div>–í—ã–±–µ—Ä–∏—Ç–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –¥–µ—Ç–∞–ª–µ–π</div>
                </div>
            </div>
        </div>
    </div>

    <!-- –ì—Ä–∞—Ñ —Å–≤—è–∑–µ–π -->
    <div class="graph-view" id="graphView">
        <canvas id="graphCanvas"></canvas>
    </div>

    <script>
        // –î–∞–Ω–Ω—ã–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π
        const directions = {
            D00: {
                name: "–ö—É–ª—å—Ç—É—Ä–∞ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞",
                stages: ["—á–µ—Ä–Ω–æ–≤–∞—è", "—á–∏—Å—Ç–æ–≤–∞—è"],
                block: "–°–∏—Å—Ç–µ–º–Ω–æ–µ",
                technologies: [
                    { id: "T-KP-001", name: "–û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è —Ä–∞–±–æ—á–µ–≥–æ –º–µ—Å—Ç–∞" }
                ],
                before: [],
                after: ["D01", "D02", "D03", "D04", "D05", "D06", "D07"]
            },
            D01: {
                name: "–î–µ–º–æ–Ω—Ç–∞–∂",
                stages: ["—á–µ—Ä–Ω–æ–≤–∞—è"],
                block: "–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞",
                technologies: [
                    { id: "T-DM-001", name: "–î–µ–º–æ–Ω—Ç–∞–∂ –∫–∏—Ä–ø–∏—á–Ω—ã—Ö –ø–µ—Ä–µ–≥–æ—Ä–æ–¥–æ–∫" }
                ],
                before: ["D00"],
                after: ["D02", "D03", "D04", "D05"]
            },
            D02: {
                name: "–≠–ª–µ–∫—Ç—Ä–∏–∫–∞",
                stages: ["—á–µ—Ä–Ω–æ–≤–∞—è", "—á–∏—Å—Ç–æ–≤–∞—è"],
                block: "–ö–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏",
                technologies: [
                    { id: "T-EL-001", name: "–®—Ç—Ä–æ–±–ª–µ–Ω–∏–µ —à—Ç—Ä–æ–±–æ—Ä–µ–∑–æ–º" }
                ],
                before: ["D01"],
                after: ["D06", "D07", "D13"]
            },
            D03: {
                name: "–°–ª–∞–±–æ—Ç–æ—á–∫–∞",
                stages: ["—á–µ—Ä–Ω–æ–≤–∞—è", "—á–∏—Å—Ç–æ–≤–∞—è"],
                block: "–ö–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏",
                technologies: [
                    { id: "T-SL-001", name: "–ü—Ä–æ–∫–ª–∞–¥–∫–∞ UTP –∫–∞–±–µ–ª—è" }
                ],
                before: ["D01"],
                after: ["D06", "D07"]
            },
            D04: {
                name: "–°–∞–Ω—Ç–µ—Ö–Ω–∏–∫–∞",
                stages: ["—á–µ—Ä–Ω–æ–≤–∞—è", "—á–∏—Å—Ç–æ–≤–∞—è"],
                block: "–ö–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏",
                technologies: [
                    { id: "T-SN-001", name: "–†–∞–∑–≤–æ–¥–∫–∞ –≤–æ–¥–æ—Å–Ω–∞–±–∂–µ–Ω–∏—è –ü–ü–†" }
                ],
                before: ["D01"],
                after: ["D07", "D12", "D13"]
            },
            D05: {
                name: "–ö–ª–∏–º–∞—Ç",
                stages: ["—á–µ—Ä–Ω–æ–≤–∞—è", "—á–∏—Å—Ç–æ–≤–∞—è"],
                block: "–ö–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏",
                technologies: [
                    { id: "T-KL-001", name: "–ü—Ä–æ–∫–ª–∞–¥–∫–∞ —Ç—Ä–∞—Å—Å –∫–æ–Ω–¥–∏—Ü–∏–æ–Ω–µ—Ä–∞" }
                ],
                before: ["D01", "D02"],
                after: ["D09", "D10", "D11"]
            },
            D06: {
                name: "–ú–æ–Ω—Ç–∞–∂",
                stages: ["—á–µ—Ä–Ω–æ–≤–∞—è", "—á–∏—Å—Ç–æ–≤–∞—è"],
                block: "–ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–∏–≤",
                technologies: [
                    { id: "T-MN-001", name: "–ö–ª–∞–¥–∫–∞ –≥–∞–∑–æ–±–ª–æ–∫–∞" }
                ],
                before: ["D02", "D03"],
                after: ["D07", "D08"]
            },
            D07: {
                name: "–ò–∑–æ–ª—è—Ü–∏—è",
                stages: ["—á–µ—Ä–Ω–æ–≤–∞—è"],
                block: "–ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–∏–≤",
                technologies: [
                    { id: "T-IZ-001", name: "–ó–≤—É–∫–æ–∏–∑–æ–ª—è—Ü–∏—è —Å—Ç–µ–Ω –∫–∞—Ä–∫–∞—Å–æ–º" }
                ],
                before: ["D02", "D03", "D04", "D05", "D06"],
                after: ["D08", "D09", "D12", "D13"]
            },
            D08: {
                name: "–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å—Ç–µ–Ω",
                stages: ["—á–µ—Ä–Ω–æ–≤–∞—è"],
                block: "–û—Ç–¥–µ–ª–∫–∞",
                technologies: [
                    { id: "T-PD-001", name: "–ì—Ä—É–Ω—Ç–æ–≤–∫–∞ –≥–ª—É–±–æ–∫–æ–≥–æ –ø—Ä–æ–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏—è" }
                ],
                before: ["D06", "D07"],
                after: ["D09"]
            },
            D09: {
                name: "–®—Ç—É–∫–∞—Ç—É—Ä–∫–∞",
                stages: ["—á–µ—Ä–Ω–æ–≤–∞—è"],
                block: "–û—Ç–¥–µ–ª–∫–∞",
                technologies: [
                    { id: "T-SH-010", name: "–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –º–∞—è–∫–æ–≤" }
                ],
                before: ["D08"],
                after: ["D10", "D11", "D12"]
            },
            D10: {
                name: "–ü–æ–∫—Ä–∞—Å–∫–∞",
                stages: ["—á–∏—Å—Ç–æ–≤–∞—è"],
                block: "–û—Ç–¥–µ–ª–∫–∞",
                technologies: [
                    { id: "T-PK-001", name: "–ü–æ–∫—Ä–∞—Å–∫–∞ —Å—Ç–µ–Ω –≤–∞–ª–∏–∫–æ–º" }
                ],
                before: ["D09"],
                after: ["D14", "D15", "D16"]
            },
            D11: {
                name: "–û–±–æ–∏",
                stages: ["—á–∏—Å—Ç–æ–≤–∞—è"],
                block: "–û—Ç–¥–µ–ª–∫–∞",
                technologies: [
                    { id: "T-OB-010", name: "–ü–æ–∫–ª–µ–π–∫–∞ —Ñ–ª–∏–∑–µ–ª–∏–Ω–æ–≤—ã—Ö –æ–±–æ–µ–≤" }
                ],
                before: ["D09"],
                after: ["D14", "D15", "D16"]
            },
            D12: {
                name: "–ü–ª–∏—Ç–∫–∞",
                stages: ["—á–∏—Å—Ç–æ–≤–∞—è"],
                block: "–û—Ç–¥–µ–ª–∫–∞",
                technologies: [
                    { id: "T-PL-001", name: "–£–∫–ª–∞–¥–∫–∞ –∫–µ—Ä–∞–º–æ–≥—Ä–∞–Ω–∏—Ç–∞ –Ω–∞ –ø–æ–ª" }
                ],
                before: ["D07", "D09", "D13"],
                after: ["D04", "D14"]
            },
            D13: {
                name: "–ü–æ–ª—ã —á–µ—Ä–Ω–æ–≤—ã–µ",
                stages: ["—á–µ—Ä–Ω–æ–≤–∞—è"],
                block: "–ü–æ–ª—ã",
                technologies: [
                    { id: "T-PC-040", name: "–ú–æ–∫—Ä–∞—è —Å—Ç—è–∂–∫–∞ –ø–æ –º–∞—è–∫–∞–º" }
                ],
                before: ["D02", "D04", "D07"],
                after: ["D12", "D14"]
            },
            D14: {
                name: "–ü–æ–ª—ã —á–∏—Å—Ç–æ–≤—ã–µ",
                stages: ["—á–∏—Å—Ç–æ–≤–∞—è"],
                block: "–ü–æ–ª—ã",
                technologies: [
                    { id: "T-PF-001", name: "–£–∫–ª–∞–¥–∫–∞ –ª–∞–º–∏–Ω–∞—Ç–∞ –ø–ª–∞–≤–∞—é—â–∏–º —Å–ø–æ—Å–æ–±–æ–º" }
                ],
                before: ["D10", "D11", "D12"],
                after: ["D15", "D16", "D17"]
            },
            D15: {
                name: "–û–∫–Ω–∞",
                stages: ["—á–∏—Å—Ç–æ–≤–∞—è"],
                block: "–î–≤–µ—Ä–∏/–û–∫–Ω–∞",
                technologies: [
                    { id: "T-OK-001", name: "–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ü–í–• –æ–∫–Ω–∞" }
                ],
                before: ["D14"],
                after: []
            },
            D16: {
                name: "–î–≤–µ—Ä–∏ –º–µ–∂–∫–æ–º–Ω–∞—Ç–Ω—ã–µ",
                stages: ["—á–∏—Å—Ç–æ–≤–∞—è"],
                block: "–î–≤–µ—Ä–∏/–û–∫–Ω–∞",
                technologies: [
                    { id: "T-DI-001", name: "–£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ä–∞—Å–ø–∞—à–Ω–æ–π –¥–≤–µ—Ä–∏" }
                ],
                before: ["D14"],
                after: []
            },
            D17: {
                name: "–î–≤–µ—Ä–∏ –≤—Ö–æ–¥–Ω—ã–µ",
                stages: ["—á–∏—Å—Ç–æ–≤–∞—è"],
                block: "–î–≤–µ—Ä–∏/–û–∫–Ω–∞",
                technologies: [
                    { id: "T-DV-001", name: "–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –º–µ—Ç–∞–ª–ª–∏—á–µ—Å–∫–æ–π –¥–≤–µ—Ä–∏" }
                ],
                before: ["D14"],
                after: []
            },
            D18: {
                name: "–§–∞—Å–∞–¥",
                stages: ["—á–µ—Ä–Ω–æ–≤–∞—è", "—á–∏—Å—Ç–æ–≤–∞—è"],
                block: "–§–∞—Å–∞–¥",
                technologies: [
                    { id: "T-FS-001", name: "–£—Ç–µ–ø–ª–µ–Ω–∏–µ —Ñ–∞—Å–∞–¥–∞ –ø–µ–Ω–æ–ø–æ–ª–∏—Å—Ç–∏—Ä–æ–ª–æ–º" }
                ],
                before: ["D06", "D07"],
                after: []
            }
        };

        // –í—ã–±–æ—Ä –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è
        let selectedDirection = null;

        document.querySelectorAll('.direction').forEach(el => {
            el.addEventListener('click', () => {
                document.querySelectorAll('.direction').forEach(d => d.classList.remove('selected'));
                el.classList.add('selected');
                selectedDirection = el.dataset.id;
                showDetail(selectedDirection);
            });
        });

        function showDetail(id) {
            const d = directions[id];
            const panel = document.getElementById('detailPanel');

            panel.innerHTML = `
                <div class="detail-header">
                    <div>
                        <div class="detail-id">${id}</div>
                        <div class="detail-name">${d.name}</div>
                    </div>
                    <div class="detail-stages">
                        ${d.stages.map(s => `<span class="stage-tag ${s === '—á–µ—Ä–Ω–æ–≤–∞—è' ? 'chernovaya' : 'chistovaya'}">${s}</span>`).join('')}
                    </div>
                </div>

                <div class="detail-section">
                    <div class="detail-section-title">–ë–ª–æ–∫: ${d.block}</div>
                </div>

                <div class="detail-section">
                    <div class="detail-section-title">–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ (${d.technologies.length})</div>
                    <div class="tech-list">
                        ${d.technologies.map(t => `
                            <div class="tech-item">
                                <span>${t.name}</span>
                                <span class="tech-id">${t.id}</span>
                            </div>
                        `).join('')}
                    </div>
                </div>

                ${d.before.length > 0 ? `
                <div class="detail-section">
                    <div class="detail-section-title">–ó–∞–≤–∏—Å–∏—Ç –æ—Ç (–î–û)</div>
                    <div class="deps-list">
                        ${d.before.map(dep => `<span class="dep-tag before">${dep} ${directions[dep]?.name || ''}</span>`).join('')}
                    </div>
                </div>
                ` : ''}

                ${d.after.length > 0 ? `
                <div class="detail-section">
                    <div class="detail-section-title">–û—Ç–∫—Ä—ã–≤–∞–µ—Ç (–ü–û–°–õ–ï)</div>
                    <div class="deps-list">
                        ${d.after.map(dep => `<span class="dep-tag after">${dep} ${directions[dep]?.name || ''}</span>`).join('')}
                    </div>
                </div>
                ` : ''}

                <div class="detail-section">
                    <div class="detail-section-title">–ü—Ä–æ–≥—Ä–µ—Å—Å –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è</div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: ${d.technologies.length > 0 ? 20 : 0}%"></div>
                    </div>
                </div>
            `;
        }

        // –§–∏–ª—å—Ç—Ä—ã
        document.querySelectorAll('.filter-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');

                const filter = btn.dataset.filter;

                document.querySelectorAll('.direction').forEach(d => {
                    const stages = d.dataset.stages;
                    const block = d.dataset.block;

                    let show = true;

                    if (filter === 'chernovaya') {
                        show = stages === 'chernovaya' || stages === 'both';
                    } else if (filter === 'chistovaya') {
                        show = stages === 'chistovaya' || stages === 'both';
                    } else if (filter !== 'all') {
                        show = block === filter;
                    }

                    d.style.display = show ? 'block' : 'none';
                });
            });
        });

        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤–∏–¥–æ–≤
        function showView(view) {
            document.querySelectorAll('.view-btn').forEach(b => b.classList.remove('active'));
            document.querySelector(`.view-btn[onclick="showView('${view}')"]`).classList.add('active');

            if (view === 'cards') {
                document.getElementById('cardsView').style.display = 'flex';
                document.getElementById('graphView').classList.remove('active');
            } else {
                document.getElementById('cardsView').style.display = 'none';
                document.getElementById('graphView').classList.add('active');
                drawGraph();
            }
        }

        // –†–∏—Å–æ–≤–∞–Ω–∏–µ –≥—Ä–∞—Ñ–∞ —Å–≤—è–∑–µ–π
        function drawGraph() {
            const canvas = document.getElementById('graphCanvas');
            const ctx = canvas.getContext('2d');

            canvas.width = canvas.offsetWidth * 2;
            canvas.height = canvas.offsetHeight * 2;
            ctx.scale(2, 2);

            const width = canvas.offsetWidth;
            const height = canvas.offsetHeight;

            // –ü–æ–∑–∏—Ü–∏–∏ —É–∑–ª–æ–≤
            const positions = {
                D00: { x: width/2, y: 40 },
                D01: { x: width/2, y: 100 },
                D02: { x: width/5, y: 170 },
                D03: { x: width*2/5, y: 170 },
                D04: { x: width*3/5, y: 170 },
                D05: { x: width*4/5, y: 170 },
                D06: { x: width/3, y: 240 },
                D07: { x: width*2/3, y: 240 },
                D13: { x: width/2, y: 300 },
                D08: { x: width/4, y: 340 },
                D09: { x: width/2, y: 340 },
                D10: { x: width/5, y: 400 },
                D11: { x: width*2/5, y: 400 },
                D12: { x: width*3/5, y: 400 },
                D14: { x: width/2, y: 450 },
                D15: { x: width/4, y: 490 },
                D16: { x: width/2, y: 490 },
                D17: { x: width*3/4, y: 490 },
                D18: { x: width*5/6, y: 300 }
            };

            // –†–∏—Å—É–µ–º —Å–≤—è–∑–∏
            ctx.strokeStyle = 'rgba(255,255,255,0.15)';
            ctx.lineWidth = 1;

            Object.keys(directions).forEach(id => {
                const d = directions[id];
                const from = positions[id];

                d.after.forEach(afterId => {
                    const to = positions[afterId];
                    if (from && to) {
                        ctx.beginPath();
                        ctx.moveTo(from.x, from.y);
                        ctx.lineTo(to.x, to.y);
                        ctx.stroke();
                    }
                });
            });

            // –†–∏—Å—É–µ–º —É–∑–ª—ã
            Object.keys(positions).forEach(id => {
                const pos = positions[id];
                const d = directions[id];

                // –ö—Ä—É–≥
                ctx.beginPath();
                ctx.arc(pos.x, pos.y, 20, 0, Math.PI * 2);

                // –¶–≤–µ—Ç –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —ç—Ç–∞–ø–∞
                if (d.stages.includes('—á–µ—Ä–Ω–æ–≤–∞—è') && d.stages.includes('—á–∏—Å—Ç–æ–≤–∞—è')) {
                    const gradient = ctx.createLinearGradient(pos.x - 20, pos.y, pos.x + 20, pos.y);
                    gradient.addColorStop(0, '#f97316');
                    gradient.addColorStop(1, '#3b82f6');
                    ctx.fillStyle = gradient;
                } else if (d.stages.includes('—á–µ—Ä–Ω–æ–≤–∞—è')) {
                    ctx.fillStyle = '#f97316';
                } else {
                    ctx.fillStyle = '#3b82f6';
                }

                ctx.fill();

                // ID
                ctx.fillStyle = '#fff';
                ctx.font = '10px sans-serif';
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                ctx.fillText(id, pos.x, pos.y);

                // –ù–∞–∑–≤–∞–Ω–∏–µ –ø–æ–¥ —É–∑–ª–æ–º
                ctx.fillStyle = 'rgba(255,255,255,0.6)';
                ctx.font = '9px sans-serif';
                ctx.fillText(d.name, pos.x, pos.y + 30);
            });
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        window.addEventListener('resize', () => {
            if (document.getElementById('graphView').classList.contains('active')) {
                drawGraph();
            }
        });
    </script>
</body>
</html>
